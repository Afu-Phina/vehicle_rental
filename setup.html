<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🚗 Car Rental System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #333;
        }

        .container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            padding: 40px;
            min-width: 500px;
            max-width: 800px;
            width: 90%;
            animation: slideIn 0.6s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            color: #4a5568;
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            color: #718096;
            font-size: 1.1rem;
        }

        .login-form, .dashboard {
            display: none;
        }

        .login-form.active, .dashboard.active {
            display: block;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #4a5568;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #718096 0%, #4a5568 100%);
        }

        .btn-danger {
            background: linear-gradient(135deg, #fc8181 0%, #e53e3e 100%);
        }

        .btn-success {
            background: linear-gradient(135deg, #68d391 0%, #38a169 100%);
        }

        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);
            border-radius: 15px;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .menu-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 30px;
        }

        .content-area {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            min-height: 300px;
        }

        .car-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .car-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
        }

        .car-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.15);
        }

        .car-status {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .status-available {
            background: #c6f6d5;
            color: #22543d;
        }

        .status-rented {
            background: #fed7d7;
            color: #742a2a;
        }

        .alert {
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            font-weight: 500;
        }

        .alert-success {
            background: #c6f6d5;
            color: #22543d;
            border: 1px solid #9ae6b4;
        }

        .alert-error {
            background: #fed7d7;
            color: #742a2a;
            border: 1px solid #fca5a5;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            border-radius: 15px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            animation: modalSlideIn 0.3s ease-out;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
                margin: 20px;
            }
            
            .dashboard-header {
                flex-direction: column;
                gap: 15px;
            }
            
            .menu-buttons {
                justify-content: center;
            }
            
            .car-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Login Screen -->
        <div class="login-form active" id="loginScreen">
            <div class="header">
                <h1>🚗 Car Rental System</h1>
                <p>Your premium car rental experience</p>
            </div>
            
            <form id="loginForm">
                <div class="form-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" required placeholder="Enter your username">
                </div>
                
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" required placeholder="Enter your password">
                </div>
                
                <button type="submit" class="btn" style="width: 100%; opacity: 0.6; cursor: not-allowed;" disabled>
                    <span id="loginBtnText">Login</span>
                    <span class="loading" id="loginLoading" style="display: none;"></span>
                </button>
            </form>
            
            <div id="loginAlert"></div>
            
            <div style="margin-top: 20px; text-align: center; color: #718096;">
                <p><strong>Demo Accounts:</strong></p>
                <p>Admin: admin / admin123</p>
                <p>Customer: john / 1234 or alice / pass</p>
            </div>
        </div>

        <!-- Dashboard -->
        <div class="dashboard" id="dashboard">
            <div class="dashboard-header">
                <div class="user-info">
                    <div class="user-avatar" id="userAvatar">A</div>
                    <div>
                        <div style="font-weight: 600;" id="welcomeText">Welcome Admin</div>
                        <div style="color: #718096; font-size: 14px;" id="roleText">Administrator</div>
                    </div>
                </div>
                <button class="btn btn-secondary" onclick="logout()">Logout</button>
            </div>

            <div class="menu-buttons" id="menuButtons">
                <!-- Menu buttons will be populated based on user role -->
            </div>

            <div class="content-area" id="contentArea">
                <div style="text-align: center; color: #718096; padding: 40px;">
                    <h3>Welcome to your dashboard!</h3>
                    <p>Select an option from the menu above to get started.</p>
                </div>
            </div>
        </div>

        <!-- Modal for adding cars -->
        <div class="modal" id="addCarModal">
            <div class="modal-content">
                <h3 style="margin-bottom: 20px;">🚗 Add New Car</h3>
                <form id="addCarForm">
                    <div class="form-group">
                        <label for="carModel">Car Model</label>
                        <input type="text" id="carModel" required placeholder="e.g., Toyota Corolla">
                    </div>
                    <div class="form-group">
                        <label for="plateNumber">Plate Number</label>
                        <input type="text" id="plateNumber" required placeholder="e.g., ABC123">
                    </div>
                    <div style="display: flex; gap: 10px; justify-content: flex-end;">
                        <button type="button" class="btn btn-secondary" onclick="closeAddCarModal()">Cancel</button>
                        <button type="submit" class="btn btn-success">Add Car</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        // Car Rental System Classes (JavaScript implementation of C++ OOP concepts)
        
        // Car Class - Demonstrates Encapsulation
        class Car {
            constructor(model, plateNumber) {
                this.model = model;
                this.plateNumber = plateNumber;
                this.isAvailable = true;
            }

            getModel() { return this.model; }
            getPlate() { return this.plateNumber; }
            available() { return this.isAvailable; }

            rent() { this.isAvailable = false; }
            returnCar() { this.isAvailable = true; }

            display() {
                return {
                    model: this.model,
                    plate: this.plateNumber,
                    status: this.isAvailable ? "Available" : "Rented"
                };
            }
        }

        // Abstract User Class - Demonstrates Inheritance and Polymorphism
        class User {
            constructor(username, password) {
                this.username = username;
                this.password = password;
            }

            getUsername() { return this.username; }
            getPassword() { return this.password; }
            
            // Abstract method to be implemented by derived classes
            getRole() { throw new Error("Abstract method must be implemented"); }
        }

        // Admin Class - Inherits from User
        class Admin extends User {
            constructor(username, password) {
                super(username, password);
            }

            getRole() { return "Admin"; }

            addCar(cars, model, plate) {
                cars.push(new Car(model, plate));
                return "✅ Car added successfully!";
            }

            viewCars(cars) {
                return cars;
            }
        }

        // Customer Class - Inherits from User
        class Customer extends User {
            constructor(username, password) {
                super(username, password);
            }

            getRole() { return "Customer"; }

            viewAvailableCars(cars) {
                return cars.filter(car => car.available());
            }

            rentCar(cars, plate) {
                const car = cars.find(c => c.getPlate() === plate && c.available());
                if (car) {
                    car.rent();
                    return `✅ You rented: ${car.getModel()}`;
                }
                return "❌ Car not found or already rented.";
            }

            returnCar(cars, plate) {
                const car = cars.find(c => c.getPlate() === plate && !c.available());
                if (car) {
                    car.returnCar();
                    return `✅ You returned: ${car.getModel()}`;
                }
                return "❌ Car not found or not rented.";
            }
        }

        // Rental System Class - Demonstrates Composition
        class RentalSystem {
            constructor() {
                // Initialize with demo data
                this.users = [
                    new Admin("admin", "admin123"),
                    new Customer("john", "1234"),
                    new Customer("alice", "pass")
                ];

                this.cars = [
                    new Car("Toyota Corolla", "ABC123"),
                    new Car("Honda Civic", "XYZ789"),
                    new Car("BMW X5", "BMW001"),
                    new Car("Audi A4", "AUD456")
                ];

                this.currentUser = null;
            }

            login(username, password) {
                const user = this.users.find(u => 
                    u.getUsername() === username && u.getPassword() === password
                );
                if (user) {
                    this.currentUser = user;
                    return user;
                }
                return null;
            }

            logout() {
                this.currentUser = null;
            }

            getCars() {
                return this.cars;
            }

            addCar(model, plate) {
                if (this.currentUser instanceof Admin) {
                    return this.currentUser.addCar(this.cars, model, plate);
                }
                return "❌ Access denied. Admin privileges required.";
            }
        }

        // Global system instance
        const rentalSystem = new RentalSystem();

        // DOM Elements
        const loginScreen = document.getElementById('loginScreen');
        const dashboard = document.getElementById('dashboard');
        const loginForm = document.getElementById('loginForm');
        const loginAlert = document.getElementById('loginAlert');
        const menuButtons = document.getElementById('menuButtons');
        const contentArea = document.getElementById('contentArea');

        // Event Listeners
        loginForm.addEventListener('submit', handleLogin);
        document.getElementById('addCarForm').addEventListener('submit', handleAddCar);
        
        // Enable login button when both fields have values
        const usernameInput = document.getElementById('username');
        const passwordInput = document.getElementById('password');
        const loginBtn = document.querySelector('#loginForm button[type="submit"]');
        
        function checkLoginFields() {
            const hasUsername = usernameInput.value.trim().length > 0;
            const hasPassword = passwordInput.value.trim().length > 0;
            
            if (hasUsername && hasPassword) {
                loginBtn.disabled = false;
                loginBtn.style.opacity = '1';
                loginBtn.style.cursor = 'pointer';
            } else {
                loginBtn.disabled = true;
                loginBtn.style.opacity = '0.6';
                loginBtn.style.cursor = 'not-allowed';
            }
        }
        
        // Initially disable the button
        checkLoginFields();
        
        // Add event listeners for real-time validation
        usernameInput.addEventListener('input', checkLoginFields);
        passwordInput.addEventListener('input', checkLoginFields);

        function handleLogin(e) {
            e.preventDefault();
            
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            // Show loading state
            document.getElementById('loginBtnText').style.display = 'none';
            document.getElementById('loginLoading').style.display = 'inline-block';
            
            // Simulate network delay for better UX
            setTimeout(() => {
                const user = rentalSystem.login(username, password);
                
                document.getElementById('loginBtnText').style.display = 'inline';
                document.getElementById('loginLoading').style.display = 'none';
                
                if (user) {
                    showAlert('✅ Login successful!', 'success');
                    setTimeout(() => {
                        showDashboard(user);
                    }, 1000);
                } else {
                    showAlert('❌ Invalid credentials! Please try again.', 'error');
                }
            }, 1500);
        }

        function showAlert(message, type) {
            loginAlert.innerHTML = `<div class="alert alert-${type}">${message}</div>`;
            setTimeout(() => {
                loginAlert.innerHTML = '';
            }, 3000);
        }

        function showDashboard(user) {
            loginScreen.classList.remove('active');
            dashboard.classList.add('active');
            
            // Update user info
            document.getElementById('userAvatar').textContent = user.getUsername()[0].toUpperCase();
            document.getElementById('welcomeText').textContent = `Welcome ${user.getUsername()}`;
            document.getElementById('roleText').textContent = user.getRole();
            
            // Setup menu based on user role
            setupMenu(user);
        }

        function setupMenu(user) {
            menuButtons.innerHTML = '';
            
            if (user instanceof Admin) {
                menuButtons.innerHTML = `
                    <button class="btn" onclick="showAddCarForm()">➕ Add Car</button>
                    <button class="btn" onclick="viewAllCars()">🚗 View All Cars</button>
                `;
            } else if (user instanceof Customer) {
                menuButtons.innerHTML = `
                    <button class="btn" onclick="viewAvailableCars()">🔍 View Available Cars</button>
                    <button class="btn btn-success" onclick="showRentCarForm()">🚗 Rent Car</button>
                    <button class="btn btn-danger" onclick="showReturnCarForm()">↩️ Return Car</button>
                `;
            }
        }

        function showAddCarForm() {
            document.getElementById('addCarModal').classList.add('active');
        }

        function closeAddCarModal() {
            document.getElementById('addCarModal').classList.remove('active');
            document.getElementById('addCarForm').reset();
        }

        function handleAddCar(e) {
            e.preventDefault();
            
            const model = document.getElementById('carModel').value;
            const plate = document.getElementById('plateNumber').value;
            
            const result = rentalSystem.addCar(model, plate);
            
            closeAddCarModal();
            showContentAlert(result, result.includes('✅') ? 'success' : 'error');
            
            if (result.includes('✅')) {
                viewAllCars(); // Refresh the car list
            }
        }

        function viewAllCars() {
            const cars = rentalSystem.getCars();
            displayCars(cars, "All Cars");
        }

        function viewAvailableCars() {
            const availableCars = rentalSystem.currentUser.viewAvailableCars(rentalSystem.getCars());
            displayCars(availableCars, "Available Cars");
        }

        function displayCars(cars, title) {
            if (cars.length === 0) {
                contentArea.innerHTML = `
                    <div style="text-align: center; padding: 40px;">
                        <h3>${title}</h3>
                        <p style="color: #718096;">No cars found.</p>
                    </div>
                `;
                return;
            }

            const carCards = cars.map(car => {
                const carData = car.display();
                const statusClass = carData.status === 'Available' ? 'status-available' : 'status-rented';
                
                return `
                    <div class="car-card">
                        <div class="car-status ${statusClass}">${carData.status}</div>
                        <h4 style="margin-bottom: 10px; color: #4a5568;">${carData.model}</h4>
                        <p style="color: #718096; margin-bottom: 15px;">Plate: ${carData.plate}</p>
                        ${rentalSystem.currentUser instanceof Customer && carData.status === 'Available' ? 
                            `<button class="btn btn-success" onclick="rentSpecificCar('${carData.plate}')">Rent This Car</button>` : ''}
                        ${rentalSystem.currentUser instanceof Customer && carData.status === 'Rented' ? 
                            `<button class="btn btn-danger" onclick="returnSpecificCar('${carData.plate}')">Return This Car</button>` : ''}
                    </div>
                `;
            }).join('');

            contentArea.innerHTML = `
                <h3 style="margin-bottom: 20px;">${title}</h3>
                <div class="car-grid">${carCards}</div>
            `;
        }

        function showRentCarForm() {
            const availableCars = rentalSystem.currentUser.viewAvailableCars(rentalSystem.getCars());
            
            if (availableCars.length === 0) {
                showContentAlert('❌ No cars available for rent.', 'error');
                return;
            }

            const options = availableCars.map(car => 
                `<option value="${car.getPlate()}">${car.getModel()} (${car.getPlate()})</option>`
            ).join('');

            contentArea.innerHTML = `
                <h3 style="margin-bottom: 20px;">🚗 Rent a Car</h3>
                <div style="max-width: 400px;">
                    <div class="form-group">
                        <label for="rentCarSelect">Select a car to rent:</label>
                        <select id="rentCarSelect">
                            <option value="">Choose a car...</option>
                            ${options}
                        </select>
                    </div>
                    <button class="btn btn-success" onclick="rentSelectedCar()">Rent Selected Car</button>
                </div>
            `;
        }

        function showReturnCarForm() {
            const rentedCars = rentalSystem.getCars().filter(car => !car.available());
            
            if (rentedCars.length === 0) {
                showContentAlert('❌ No cars currently rented.', 'error');
                return;
            }

            const options = rentedCars.map(car => 
                `<option value="${car.getPlate()}">${car.getModel()} (${car.getPlate()})</option>`
            ).join('');

            contentArea.innerHTML = `
                <h3 style="margin-bottom: 20px;">↩️ Return a Car</h3>
                <div style="max-width: 400px;">
                    <div class="form-group">
                        <label for="returnCarSelect">Select a car to return:</label>
                        <select id="returnCarSelect">
                            <option value="">Choose a car...</option>
                            ${options}
                        </select>
                    </div>
                    <button class="btn btn-danger" onclick="returnSelectedCar()">Return Selected Car</button>
                </div>
            `;
        }

        function rentSelectedCar() {
            const plate = document.getElementById('rentCarSelect').value;
            if (!plate) {
                showContentAlert('❌ Please select a car to rent.', 'error');
                return;
            }
            rentSpecificCar(plate);
        }

        function returnSelectedCar() {
            const plate = document.getElementById('returnCarSelect').value;
            if (!plate) {
                showContentAlert('❌ Please select a car to return.', 'error');
                return;
            }
            returnSpecificCar(plate);
        }

        function rentSpecificCar(plate) {
            const result = rentalSystem.currentUser.rentCar(rentalSystem.getCars(), plate);
            showContentAlert(result, result.includes('✅') ? 'success' : 'error');
        }

        function returnSpecificCar(plate) {
            const result = rentalSystem.currentUser.returnCar(rentalSystem.getCars(), plate);
            showContentAlert(result, result.includes('✅') ? 'success' : 'error');
        }

        function showContentAlert(message, type) {
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type}`;
            alertDiv.textContent = message;
            
            contentArea.insertBefore(alertDiv, contentArea.firstChild);
            
            setTimeout(() => {
                alertDiv.remove();
            }, 3000);
        }

        function logout() {
            rentalSystem.logout();
            dashboard.classList.remove('active');
            loginScreen.classList.add('active');
            
            // Reset form
            document.getElementById('loginForm').reset();
            loginAlert.innerHTML = '';
            
            // Reset content
            contentArea.innerHTML = `
                <div style="text-align: center; color: #718096; padding: 40px;">
                    <h3>Welcome to your dashboard!</h3>
                    <p>Select an option from the menu above to get started.</p>
                </div>
            `;
        }

        // Close modal when clicking outside
        document.getElementById('addCarModal').addEventListener('click', (e) => {
            if (e.target === e.currentTarget) {
                closeAddCarModal();
            }
        });
    </script>
</body>
</html>